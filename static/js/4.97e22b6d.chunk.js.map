{"version":3,"sources":["hoc/withAuthRedirect.js","components/Dialogs/Dialogs.module.css","components/Dialogs/Dialogs/Dialog.module.css","components/Dialogs/Messages/Message.module.css","media/images/delete.png","components/Dialogs/Dialogs/Dialog.tsx","components/Dialogs/Messages/Message.tsx","components/Dialogs/sendMessageForm.tsx","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx"],"names":["withAuthRedirect","Component","AuthRedirect","this","props","isAuth","to","React","connect","mapStateToProps","state","auth","module","exports","Dialog","id","getMessagesList","photos","userName","className","s","dialog","activeClassName","active","onClick","src","defaultUserImg","alt","f_img","Message","deleteMessage","senderId","currentUserId","img","viewed","message","userId","isYou","yes","no","messages","deleteMessageOwn","dots","deletePng","mes","minLength1","minLengthValidator","maxLength300","maxLengthValidator","SendMessageForm","reduxForm","form","handleSubmit","onSubmit","Field","rows","cols","someArbitraryOtherProp","name","component","TextareaDialogs","placeholder","validate","required","butt","button","Dialogs","dialogs","sendMessage","dialogsLoading","messagesLoading","match","params","dialogsElements","map","small","key","messagesElements","body","content","title","span","Preloader","messag","but","formData","DialogsContainer","reGetDialogs","length","getDialogsPage","prevProps","prevState","snapshot","PureComponent","compose","dialogsPage","messageData","dialogsData","withRouter"],"mappings":"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","file":"static/js/4.97e22b6d.chunk.js","sourcesContent":["import {Redirect} from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nexport const withAuthRedirect = (Component) =>{\r\n    class AuthRedirect extends React.Component{\r\n        render() {\r\n            if (!this.props.isAuth){return <Redirect to=\"/login\"/>}\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n    let AuthConnectedRedirect = connect(mapStateToProps)(AuthRedirect)\r\n    return AuthConnectedRedirect\r\n}\r\n\r\nconst mapStateToProps = (state) =>({\r\n    isAuth: state.auth.isAuth\r\n})","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Dialogs_content__1FUzv\",\"span\":\"Dialogs_span__3kP_e\",\"title\":\"Dialogs_title__1nMPx\",\"but\":\"Dialogs_but__2zZAW\",\"button\":\"Dialogs_button__18bSs\",\"messag\":\"Dialogs_messag__3ckUi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"Dialog_dialog__30jsa\",\"active\":\"Dialog_active__3Vfu9\",\"f_img\":\"Dialog_f_img__1b7H3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Message_messages__o67uO\",\"yes\":\"Message_yes__aW4Sg\",\"no\":\"Message_no__OHhsn\",\"dots\":\"Message_dots__28C0f\",\"viewed\":\"Message_viewed__1Mgjq\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA51BMVEUAAABAgIBVep1Wep5Ve51ggJ9Vep9VfZ9Ve5xXe59Xep5WeZ5VcapWep5VeZ5WeaBWfJ5VeZ5VeZ5WeZ5Ve59ZeptWep5Wep5Xe59Wep5Wep5Wep5Wep9Ye55Xep5Wep5VdZ9Wep5WeZ9Xep9Xe55Wep5NgJlVep5XeZ1Wep5Xep9QgJ9Wep5Wep1Xe59Wep9Xep9YeJ9We55Wep5Wep9Vep9Xep5We59Xd51VeZ5Vep5We5xWe55Ydp1Xe55Wep5Wep1WeZ5VgKpVep9Wep5Xep1YeZ9Wep5Wep9Wep5Ye51Wep4AAADyfsSWAAAAS3RSTlMABNHuUQhaLTZVmZEJ4lQ7RBV+u7kXq/iH45vKtB2W7xi+SoqB/Qp7jfJtEPdrnN5YIOdcyTDXTS8/yD6gGk+42YsGb81ePe13sTQNLdnyAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+QMARAIKaoAyEQAAACdSURBVBjTRc/XEoJADEDR6Iq9ICgWUOy9V+y95v//x4UNct9yZrI7AQDw+RljAfCSggChsDtFov9icRsS6JW0ISV7pZ0dRaUyWfGIlstjoYi6gSUBZbOC1RrWFZQENJotG9qdLv3bw/6Aw3A0JpjgdMZhri0IZFyuOKxVg8DCzZbDTt8THPB44mCdLwRXvKn3Bz5fb/e8jziEfZ3pB+cVGZverKz3AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTEyLTAxVDE2OjA4OjQxKzAwOjAwvyexxQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0xMi0wMVQxNjowODo0MSswMDowMM56CXkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\"","import React from \"react\";\r\nimport s from \"./Dialog.module.css\"\r\nimport {NavLink} from \"react-router-dom\";\r\nimport defaultUserImg from \"./../../../media/images/user.png\"\r\n\r\n\r\ntype DialogType= {\r\n    id: number\r\n    getMessagesList: (id:number) => void\r\n    photos:string\r\n    userName: string\r\n}\r\n\r\nconst Dialog:React.FC<DialogType> = ({id, getMessagesList, photos, userName}) => {\r\n    let getMessagesListProps =()=>{\r\n            getMessagesList(id)\r\n    }\r\n    return (\r\n        <div>\r\n            <NavLink to={\"/messages/\" + id} className={s.dialog} activeClassName={s.active} onClick = {getMessagesListProps}>\r\n                <img src = {photos || defaultUserImg} alt = '' className={s.f_img}/>\r\n                {userName}\r\n            </NavLink>\r\n            <br/>\r\n            <br/>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Dialog;\r\n","import React from \"react\";\r\nimport s from \"./Message.module.css\"\r\nimport deletePng from \"./../../../media/images/delete.png\"\r\nimport {messagesType} from \"./../Dialogs\"\r\n\r\ntype PropsTypes = {\r\n    deleteMessage: (id: string) => void\r\n    senderId: number\r\n    currentUserId: number\r\n    getMessagesList: (userId: number) => void\r\n    img?: string\r\n    userId: number\r\n    id: string\r\n    viewed: boolean\r\n    isYou?: boolean\r\n    message: Array<messagesType>\r\n}\r\n\r\nconst Message:React.FC<PropsTypes> = ({deleteMessage, senderId, currentUserId, getMessagesList, img, viewed, message, userId, id}) => {\r\n    let isYou = senderId === currentUserId\r\n    const deleteMessageOwn =(id:string, userId:number) =>{\r\n        deleteMessage(id)\r\n        getMessagesList(userId)\r\n        getMessagesList(userId)\r\n    }\r\n    return(\r\n        <>\r\n        <div className={isYou\r\n                ? s.yes\r\n                : s.no\r\n        }>\r\n        <div className={s.messages}>\r\n            <img className={s.img} src ={img} alt='' />\r\n            <span onClick={()=>{deleteMessageOwn(id, userId)}} ><img className={s.dots} src={deletePng} alt = \"\"/></span>\r\n            {!viewed && <span className={s.viewed}>.</span>}\r\n            <span className={s.mes }>{message}</span>\r\n\r\n        </div>\r\n        </div>\r\n            </>\r\n    )\r\n}\r\n\r\nexport default Message;","import React from \"react\";\r\nimport s from \"./Dialogs.module.css\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {maxLengthValidator, minLengthValidator, required} from \"../../addons/validators/validators\";\r\nimport {TextareaDialogs} from \"../common/Textarea\";\r\n\r\nlet minLength1 = minLengthValidator(1)\r\nlet maxLength300 = maxLengthValidator(300)\r\ntype SendMessageFoType = {\r\n    handleSubmit: any\r\n}\r\n\r\nconst SendMessageFo:React.FC<SendMessageFoType> = ({handleSubmit}) =>{\r\n    return(\r\n        <form onSubmit={handleSubmit}>\r\n            <Field rows=\"3\" cols = \"50\" someArbitraryOtherProp={\"s.textarea1\"}\r\n                   name =\"message\" component={TextareaDialogs}\r\n                   placeholder={\"Type your message...\"} validate = {[required, minLength1, maxLength300]}/>\r\n            <span className={s.butt}><button className={s.button}>Send</button></span>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst SendMessageForm = reduxForm({form: \"sendMessage\"})(SendMessageFo)\r\nexport default SendMessageForm","import React from \"react\";\r\nimport s from './Dialogs.module.css';\r\nimport Dialog from \"./Dialogs/Dialog\";\r\nimport Message from \"./Messages/Message\";\r\nimport SendMessageForm from \"./sendMessageForm\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\n\r\nexport type messagesType ={\r\n    viewed: boolean\r\n    senderId: number\r\n    body: string\r\n    id: string\r\n}\r\n\r\nexport type dialogsType = {\r\n    id: number\r\n    userName: string\r\n    photos:{\r\n        small:string\r\n        large:string\r\n    }\r\n}\r\n\r\ntype PropsType = {\r\n    dialogs: Array<dialogsType>\r\n    messages: Array<messagesType>\r\n    deleteMessage: (id: string) => void\r\n    currentUserId: number\r\n    sendMessage: (userId:number, message:string) => void\r\n    getMessagesList: (userId:number) => void\r\n    onSubmit?: (message:string) => void\r\n    dialogsLoading: boolean\r\n    messagesLoading: boolean\r\n    match:any\r\n}\r\n\r\nconst Dialogs:React.FC<PropsType> = ({dialogs, messages ,deleteMessage,currentUserId,sendMessage,getMessagesList,dialogsLoading,messagesLoading, ...props}) => {\r\n    let userId = props.match.params.userId\r\n    let dialogsElements = dialogs.map(dialog => <Dialog id = {dialog.id} userName ={dialog.userName} photos = {dialog.photos.small} key = {dialog.id}\r\n        // @ts-ignore\r\n                                                        getMessagesList ={getMessagesList} messages = {messages}/>)\r\n    let messagesElements = messages.map(message => <Message getMessagesList ={getMessagesList} deleteMessage={deleteMessage}\r\n                                                            userId = {userId} viewed = {message.viewed}\r\n                                                            senderId = {message.senderId} currentUserId = {currentUserId}\r\n        // @ts-ignore\r\n                                                            message= {message.body} key = {message.id} id={message.id} />)\r\n\r\n    const onSubmit = (formData:any) =>{\r\n        sendMessage(userId, formData.message)\r\n        getMessagesList(userId)\r\n        getMessagesList(userId)\r\n    }\r\n\r\n    return (\r\n        <div className={s.content }>\r\n            <div className={s.dialogs + \"unselectable\"}>\r\n                <div className={s.title }>Dialogs</div>\r\n                <div className={s.span}>{ dialogsLoading ? <Preloader/> : dialogsElements }</div>\r\n            </div>\r\n\r\n            <div className={s.messages}>\r\n                <div className={s.messag}>\r\n                { messagesLoading? <Preloader/> : messagesElements }</div>\r\n                <div className={s.but}>\r\n                    <SendMessageForm onSubmit ={onSubmit}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dialogs;","import {deleteMessage, getDialogsPage, getMessagesList, sendMessage} from \"../../redux/dialogsReducer\";\r\nimport Dialogs, {messagesType, dialogsType} from \"./Dialogs\";\r\nimport React, {PureComponent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\ntype MapStateToPropsType = {\r\n    messages: Array<messagesType>\r\n    dialogs: Array<dialogsType>\r\n    userId: number\r\n    dialogsLoading: boolean\r\n    messagesLoading: boolean\r\n    currentUserId: number\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    sendMessage: (userId:number, message:string) => void\r\n    getDialogsPage: () => void\r\n    getMessagesList: (userId:number) => void\r\n    deleteMessage: (id: string) => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n    match: any\r\n}\r\n\r\ntype dialogsContainerType = MapStateToPropsType&MapDispatchToPropsType&OwnPropsType\r\n\r\nclass DialogsContainer extends PureComponent<dialogsContainerType>{\r\n    reGetDialogs = () =>{\r\n        let userId = this.props.match.params.userId\r\n        if (userId){\r\n            this.props.getMessagesList(userId)\r\n        }\r\n        if (this.props.dialogs.length < 1) {\r\n            this.props.getDialogsPage()\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.reGetDialogs()\r\n    }\r\n    componentDidUpdate(prevProps:any, prevState:any, snapshot:any) {\r\n        if(this.props.messages.length !== prevProps.messages.length ) {\r\n            this.reGetDialogs()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <Dialogs {...this.props} messages = {this.props.messages} dialogs = {this.props.dialogs} dialogsLoading ={this.props.dialogsLoading}\r\n                        getMessagesList = {this.props.getMessagesList} messagesLoading={this.props.messagesLoading}\r\n                        deleteMessage = {this.props.deleteMessage} currentUserId = {this.props.currentUserId}\r\n        />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state:any) => {\r\n    return {\r\n        messages: state.dialogsPage.messageData,\r\n        dialogs: state.dialogsPage.dialogsData,\r\n        dialogsLoading: state.dialogsPage.dialogsLoading,\r\n        messagesLoading: state.dialogsPage.messagesLoading,\r\n        currentUserId : state.auth.id,\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps,\r\n        {sendMessage, getDialogsPage, getMessagesList, deleteMessage}),\r\n    withRouter,\r\n    withAuthRedirect,\r\n)(DialogsContainer)"],"sourceRoot":""}